### **「stuck」プロジェクト要件定義書（改訂版）**

**1. プロジェクト概要**

*   **プロジェクト名:** stuck
*   **目的:** AIとのチャット履歴、壁打ち内容、収集した情報の整理・閲覧・編集をCMS感覚で行えるダッシュボードの開発。高山まさあき様の個人利用に特化し、情報の一元管理、検索性の向上、思考の整理促進を目的とする。
*   **ターゲットユーザー:** 開発者自身（高山まさあき様）
*   **期待効果:** 個人の生産性向上、専門性の高いコンテンツ作成の基盤構築。

**2. 機能要件**

*   **2.1. 記事管理機能**
    *   **記事の表示:**
        *   中央メインエリアにMarkdown形式の記事コンテンツを表示。
        *   記事のレンダリングはHTML形式で行う。堅牢かつ安定したレンダリングライブラリを採用。
        *   右サイドエリアに記事の目次（Markdownの見出し全階層から自動生成）を表示。目次項目クリックで該当セクションへスクロール。
    *   **記事の一覧表示:**
        *   左サイドエリアに記事タイトルの一覧を表示。
        *   記事タイトルをクリックすると、メインエリアに該当記事を表示。
        *   記事テーブル形式での表示（タイトル、投稿日時、タグ、memo）。
        *   タイトル、投稿日時、タグ、memoでのソート機能。
        *   投稿日時によるフィルター機能（例：過去1週間、特定の日付範囲）。
    *   **記事の編集:**
        *   Webブラウザ上でMarkdown形式で記事を編集。
        *   編集内容の保存機能。リアルタイムプレビューは不要。
    *   **新規記事作成:**
        *   左サイドエリアの「新規記事作成」ボタンから新しい記事を作成。テンプレートは不要で、空のMarkdownエディタが表示される。
    *   **記事の削除:**
        *   記事を「ゴミ箱」へ移動する機能。
        *   ゴミ箱内の記事は30日経過後に自動的に完全に削除。
        *   ゴミ箱からの手動復元機能あり。
*   **2.2. タグ管理機能**
    *   **タグの付与:**
        *   記事ごとに複数のタグを付与できる。
        *   タグの新規作成、既存タグの選択。
    *   **タグの一覧表示:**
        *   左サイドエリアにタグ一覧を表示。
        *   タグをクリックすると、該当タグが付与された記事のみを一覧表示。
*   **2.3. 検索機能**
    *   **検索ボックス:**
        *   左サイドエリアに検索ボックスを配置。
        *   記事タイトル、本文、タグからの全文検索機能。
        *   検索結果は、記事タイトル一覧に加え、該当キーワードが含まれる箇所のスニペットも表示。
*   **2.4. 出力機能**
    *   表示されているMarkdown記事をMarkdown形式でファイルとして出力する機能。
    *   ファイル名の命名規則は `[記事タイトル].md` とする。
*   **2.5. 認証機能**
    *   Basic認証によるアクセス制限。
*   **2.6. メモ機能**
    *   記事データに「memo」フィールドを追加し、メタメモをテキスト属性で保存できる。
    *   このmemoはテーブル一覧表示でのソート対象となり、見出しとしても活用可能。

**3. 非機能要件**

*   **3.1. パフォーマンス:**
    *   記事の表示、検索、編集などの操作は快適に行えること。具体的なレスポンスタイムの目標は、個人利用においてストレスがないレベル。
*   **3.2. セキュリティ:**
    *   Basic認証によるアクセス制限。
    *   データ漏洩や改ざんに対する基本的な対策。
    *   ユーザーは自身のみのため、多要素認証などは不要。
*   **3.3. 運用・保守:**
    *   GitHubでのソースコード管理。
    *   Cloudflare Pages/Workers/D1によるデプロイ・運用。
    *   監視体制はCloudflareのデフォルト機能の範囲で、開発者自身で確認可能なレベル。
*   **3.4. 拡張性:**
    *   現時点ではテキスト記事のみ。将来的にMCPサーバーなど外部ツールとの連携の可能性は考慮するが、MVP段階では実装不要。

**4. 技術スタック**

*   **フロントエンド・バックエンド:** Next.js (フルスタック構成)
*   **デプロイ・ホスティング:** Cloudflare Pages
*   **サーバーレス機能:** Cloudflare Workers
*   **データベース:** Cloudflare D1 (スキーマ設計、APIエンドポイント設計は開発者に一任)

**5. 開発環境**

*   **ソースコード管理:** GitHub (`stuck` リポジトリ)

**6. デプロイ・運用**

*   **ドメイン:** Cloudflareで生成されるデフォルトのURLを使用。
*   **認証:** Basic認証。

**7. 開発期間**

*   MVP (Minimum Viable Product) として、約3時間の開発と3時間のチューニング・再デプロイで成立する規模感を目指す。